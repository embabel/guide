#embabel.models.default-embedding-service: nomic-embed-text:latest

# Server Configuration
server:
  port: 1337


# Spring configuration
# Force web application type (needed because Spring Shell is present)
spring:

  ai:
    mcp:
      server:
        annotation-scanner:
          enabled: true

  main:
    web-application-type: servlet
  output:
    ansi:
      enabled: always
  profiles:
    active: local  # Change to 'default' in tests to use TestContainers datasource
    config:
      activate:
        on-profile: local


# RAG Adapter Configuration (use "guide" to enable real Guide chatbot, "fake" for testing)
rag:
  adapter:
    type: guide

embabel:
  models:
    llms:
      cypher-query-generator: gpt-4.1
      summarizer: gpt-4.1-nano

    default-embedding-model: text-embedding-3-small

  agent:
    rag:
      neo:
        uri: ${NEO4J_URI:bolt://localhost:7687}
        username: ${NEO4J_USERNAME:neo4j}
        password: ${NEO4J_PASSWORD:brahmsian}
        max-chunk-size: 1500
        overlap-size: 200


  discord:
    token: ${DISCORD_TOKEN}

  shell:
    line-length: 140

guide:
  projects-path: ./embabel-projects
  default-persona: adaptive
  top-k: 10
  similarity-threshold: 0.3

  coding-llm:
    #      model: claude-3-7-sonnet-latest
    model: gpt-4.1-mini
  chat-llm:
    model: gpt-4.1-mini

  content-chunker:
    include-section-title-in-chunk: false
    max-chunk-size: 4000
    overlap-size: 200

  urls:
    - https://docs.embabel.com/embabel-agent/guide/0.3.1-SNAPSHOT/
    - https://medium.com/@springrod/build-better-agents-in-java-vs-python-embabel-vs-langgraph-f7951a0d855c
    - https://medium.com/@springrod/context-engineering-needs-domain-understanding-b4387e8e4bf8
    - https://github.com/embabel/embabel-agent/blob/main/README.md?plain=1


logging:
  level:
    com.embabel.agent.rag: INFO
    com.embabel.agent.rag.tools: DEBUG
    com.embabel.agent.rag.pipeline: DEBUG
    # Drivine logging
    org.drivine: TRACE
    org.drivine.manager: TRACE
    org.drivine.transaction: TRACE
    # WebSocket and Chat logging
    org.springframework.web.socket: INFO
    org.springframework.messaging: INFO
    com.embabel.guide.chat: DEBUG

# Data-source below is used then the 'local' config is active

database:
  dataSources:
    neo:
      type: NEO4J
      userName: ${NEO4J_USERNAME:neo4j}
      password: ${NEO4J_PASSWORD:brahmsian}
      host: ${NEO4J_HOST:localhost}
      port: 7687
      databaseName: neo4j
